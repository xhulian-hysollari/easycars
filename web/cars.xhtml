<?xml version='1.0' encoding='UTF-8' ?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:h="http://xmlns.jcp.org/jsf/html"
      xmlns:f="http://xmlns.jcp.org/jsf/core">
    <h:head>
        <title>Cars</title>
        <!-- Latest compiled and minified CSS -->
        <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.1.0/css/bootstrap.min.css"></link>

        <!-- jQuery library -->
        <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>

        <!-- Popper JS -->
        <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.0/umd/popper.min.js"></script>

        <!-- Latest compiled JavaScript -->
        <script src="https://maxcdn.bootstrapcdn.com/bootstrap/4.1.0/js/bootstrap.min.js"></script>

        <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css"></link>

        <style>
            body {
                background-image: url(http://3.bp.blogspot.com/-TEQ1_a6tFas/VL58zZdsfnI/AAAAAAAACG0/uL5DE8d8bcs/s1600/mclaren-p1-photoshoot-10.jpg);
                    /* Center and scale the image nicely */
                background-position: center;
                background-repeat: no-repeat;
                background-size: cover;
                padding-bottom: 300px;
            
            }
            .container {
                margin-top: 100px;
                height: 100%; 
            }
            .card {
                background: #212529;
                color: white; 
            }
            .card-header {
                text-align: center;
            }
        </style>
    </h:head>
    <h:body>
        <div class="container">
            <!--Data Table is used to display the data-->
            <div class="card">
                <div class="card-header"><h1>All Existing Records</h1></div>
                <div class="card-body">
                    <f:view>
                        <h:form>
                            <h:dataTable class="table table-dark" var="carsList" value="#{cars.carList()}">
                                <!--After calling the method from the BackingBean we save the collection in the variable carsList and than render throw it to display the records-->
                                <h:column>
                                    <f:facet name="header">Car Make</f:facet>
                                    <h:outputText value="#{carsList.car_make}" />
                                </h:column>
                                <h:column>
                                    <f:facet name="header">Car Model</f:facet>
                                    <h:outputText value="#{carsList.car_model}" />
                                </h:column>  
                                <h:column>
                                    <f:facet name="header">Body Type</f:facet>
                                    <h:outputText value="#{carsList.body_type}" />
                                </h:column>
                                <h:column>
                                    <f:facet name="header">Fuel Type</f:facet>
                                    <h:outputText value="#{carsList.fuel_type}" />
                                </h:column> 
                                <h:column>
                                    <f:facet name="header">First registration</f:facet>
                                    <h:outputText value="#{carsList.first_registration}" />
                                </h:column>  
                                <h:column>
                                    <f:facet name="header">Car Owner</f:facet>
                                    <h:outputText value="#{carsList.owner}" />
                                </h:column>  
                                <h:column>
                                    <f:facet name="header">Created By</f:facet>
                                    <h:outputText value="#{carsList.created_by}" />
                                </h:column>  
                                <h:column>
                                    <f:facet name="header">Edit</f:facet>
                                    <!--Pass the ID to the backend through f param and calls cars.edit wich populates the table in the editview-->
                                    <h:commandLink action="edit" actionListener="#{cars.edit()}">
                                        <f:param name="id" value="#{carsList.car_id}" />
                                        <i style="font-size: 30px;" class="fa fa-edit"></i> 
                                    </h:commandLink>
                                </h:column>

                                <h:column>
                                    <f:facet name="header">Delete</f:facet>
                                    <h:commandLink action="cars?faces-redirect=true" actionListener="#{cars.delete()}" onclick="return confirm('You are about to delete this record. Do you still want to proceed?')">
                                        <i style="font-size: 30px;" class="fa fa-times-circle"></i>
                                        <f:param name="id" value="#{carsList.car_id}" />
                                    </h:commandLink>
                                </h:column>
                            </h:dataTable>

                            <h:commandLink class="btn btn-success" action="add" value="Create new Record" />
                            <h:commandLink class="btn btn-danger" style="float: right" value="Logout" action="#{cars.logout()}"/>
                            
                            <!--Calls a method from the back end or goes to the URL string-->
                            
                        </h:form>
                    </f:view>

                </div>
            </div>
        </div>
    </h:body>
</html>

